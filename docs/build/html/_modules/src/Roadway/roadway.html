
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>src.Roadway.roadway &#8212; AutoEnv 0.0.1 documentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for src.Roadway.roadway</h1><div class="highlight"><pre>
<span></span><span class="c1"># Zhihao Zhang</span>
<span class="c1"># roadway class in python</span>
<span class="kn">from</span> <span class="nn">src.curves</span> <span class="k">import</span> <span class="n">CurvePt</span>
<span class="kn">from</span> <span class="nn">src.Vec</span> <span class="k">import</span> <span class="n">VecSE2</span><span class="p">,</span> <span class="n">VecE2</span>
<span class="kn">from</span> <span class="nn">src.Vec.geom</span> <span class="k">import</span> <span class="n">geom</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">warnings</span>


<div class="viewcode-block" id="LaneBoundary"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.LaneBoundary">[docs]</a><span class="k">class</span> <span class="nc">LaneBoundary</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        </span>
<span class="sd">        :param style: LaneBoundary style</span>
<span class="sd">        :param color: LaneBoundary color</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="n">style</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span></div>


<div class="viewcode-block" id="SpeedLimit"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.SpeedLimit">[docs]</a><span class="k">class</span> <span class="nc">SpeedLimit</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lo</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">hi</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        </span>
<span class="sd">        :param lo: the lowest speed allowed</span>
<span class="sd">        :param hi: the highest speed allowed</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lo</span> <span class="o">=</span> <span class="n">lo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hi</span> <span class="o">=</span> <span class="n">hi</span></div>

<span class="n">NULL_BOUNDARY</span> <span class="o">=</span> <span class="n">LaneBoundary</span><span class="p">(</span><span class="s2">&quot;unknown&quot;</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">)</span>
<span class="n">DEFAULT_SPEED_LIMIT</span> <span class="o">=</span> <span class="n">SpeedLimit</span><span class="p">(</span><span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">)</span>
<span class="n">DEFAULT_LANE_WIDTH</span> <span class="o">=</span> <span class="mf">3.0</span>
<span class="n">METERS_PER_FOOT</span> <span class="o">=</span> <span class="mf">0.3048</span>


<div class="viewcode-block" id="LaneTag"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.LaneTag">[docs]</a><span class="k">class</span> <span class="nc">LaneTag</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">lane</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        </span>
<span class="sd">        :param segment: the segment which this lane belongs to</span>
<span class="sd">        :param lane: which lane it belongs to</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">segment</span> <span class="o">=</span> <span class="n">segment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lane</span> <span class="o">=</span> <span class="n">lane</span></div>


<span class="n">NULL_LANETAG</span> <span class="o">=</span> <span class="n">LaneTag</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>


<div class="viewcode-block" id="RoadIndex"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.RoadIndex">[docs]</a><span class="k">class</span> <span class="nc">RoadIndex</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">        RoadIndex{I &lt;: Integer, T &lt;: Real}</span>
<span class="sd">    A data structure to index points in a roadway. Calling `roadway[roadind]` will return the point</span>
<span class="sd">    associated to the road index.</span>
<span class="sd">    # Fields</span>
<span class="sd">    - `ind::CurveIndex{I,T}` the index of the point in the curve</span>
<span class="sd">    - `tag::LaneTag` the lane tag of the point</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">:</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">CurveIndex</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="n">LaneTag</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ind</span> <span class="o">=</span> <span class="n">ind</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tag</span> <span class="o">=</span> <span class="n">tag</span>

<div class="viewcode-block" id="RoadIndex.write"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.RoadIndex.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> </span><span class="si">%.6f</span><span class="s2"> </span><span class="si">%d</span><span class="s2"> </span><span class="si">%d</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ind</span><span class="o">.</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ind</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">segment</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">lane</span><span class="p">))</span></div></div>


<span class="n">NULL_ROADINDEX</span> <span class="o">=</span> <span class="n">RoadIndex</span><span class="p">(</span><span class="n">CurvePt</span><span class="o">.</span><span class="n">CurveIndex</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">LaneTag</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>


<div class="viewcode-block" id="LaneConnection"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.LaneConnection">[docs]</a><span class="k">class</span> <span class="nc">LaneConnection</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">        LaneConnection{I &lt;: Integer, T &lt;: Real}</span>
<span class="sd">    Data structure to specify the connection of a lane. It connects `mylane` to the point `target`.</span>
<span class="sd">    `target` would typically be the starting point of a new lane.</span>
<span class="sd">    - `downstream::Bool`</span>
<span class="sd">    - `mylane::CurveIndex{I,T}`</span>
<span class="sd">    - `target::RoadIndex{I,T}`</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">downstream</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">mylane</span><span class="p">:</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">CurveIndex</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="n">RoadIndex</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">downstream</span> <span class="o">=</span> <span class="n">downstream</span>  <span class="c1"># if true, mylane → target, else target → mylane</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mylane</span> <span class="o">=</span> <span class="n">mylane</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target</span> <span class="o">=</span> <span class="n">target</span>

<div class="viewcode-block" id="LaneConnection.write"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.LaneConnection.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> (</span><span class="si">%d</span><span class="s2"> </span><span class="si">%.6f</span><span class="s2">) &quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;D&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">downstream</span> <span class="k">else</span> <span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mylane</span><span class="o">.</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mylane</span><span class="o">.</span><span class="n">t</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="parse_lane_connection"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.parse_lane_connection">[docs]</a><span class="k">def</span> <span class="nf">parse_lane_connection</span><span class="p">(</span><span class="n">line</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">cleanedline</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(\(|\))&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
    <span class="c1"># print(cleanedline)</span>
    <span class="n">tokens</span> <span class="o">=</span> <span class="n">cleanedline</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;D&quot;</span> <span class="ow">or</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;U&quot;</span>
    <span class="n">downstream</span> <span class="o">=</span> <span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;D&quot;</span><span class="p">)</span>
    <span class="n">mylane</span> <span class="o">=</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">CurveIndex</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
    <span class="n">target</span> <span class="o">=</span> <span class="n">RoadIndex</span><span class="p">(</span>
                <span class="n">CurvePt</span><span class="o">.</span><span class="n">CurveIndex</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">4</span><span class="p">])),</span>
                <span class="n">LaneTag</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">5</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">6</span><span class="p">]))</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">LaneConnection</span><span class="p">(</span><span class="n">downstream</span><span class="p">,</span> <span class="n">mylane</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span></div>


<div class="viewcode-block" id="Lane"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.Lane">[docs]</a><span class="k">class</span> <span class="nc">Lane</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    Lane class</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="n">LaneTag</span><span class="p">,</span> <span class="n">curve</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_LANE_WIDTH</span><span class="p">,</span> <span class="n">speed_limit</span><span class="p">:</span> <span class="n">SpeedLimit</span> <span class="o">=</span> <span class="n">DEFAULT_SPEED_LIMIT</span><span class="p">,</span>
                 <span class="n">boundary_left</span><span class="p">:</span> <span class="n">LaneBoundary</span> <span class="o">=</span> <span class="n">NULL_BOUNDARY</span><span class="p">,</span> <span class="n">boundary_right</span><span class="p">:</span> <span class="n">LaneBoundary</span> <span class="o">=</span> <span class="n">NULL_BOUNDARY</span><span class="p">,</span> <span class="n">exits</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">entrances</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span>
                 <span class="nb">next</span><span class="p">:</span> <span class="n">RoadIndex</span> <span class="o">=</span> <span class="n">NULL_ROADINDEX</span><span class="p">,</span> <span class="n">prev</span><span class="p">:</span> <span class="n">RoadIndex</span> <span class="o">=</span> <span class="n">NULL_ROADINDEX</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">               Lane</span>
<span class="sd">           A driving lane on a roadway. It identified by a `LaneTag`. A lane is defined by a curve which</span>
<span class="sd">           represents a center line and a width. In addition it has attributed like speed limit.</span>
<span class="sd">           A lane can be connected to other lane in the roadway, the connection are specified in the exits</span>
<span class="sd">           and entrances fields.</span>
<span class="sd">           # Fields</span>
<span class="sd">           - `tag::LaneTag`</span>
<span class="sd">           - `curve::List{CurvePt}`</span>
<span class="sd">           - `width::float`  [m]</span>
<span class="sd">           - `speed_limit::SpeedLimit`</span>
<span class="sd">           - `boundary_left::LaneBoundary`</span>
<span class="sd">           - `boundary_right::LaneBoundary`</span>
<span class="sd">           - `exits::List{LaneConnection} # list of exits; put the primary exit (at end of lane) first`</span>
<span class="sd">           - `entrances::List{LaneConnection} # list of entrances; put the primary entrance (at start of lane) first`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tag</span> <span class="o">=</span> <span class="n">tag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curve</span> <span class="o">=</span> <span class="n">curve</span>  <span class="c1"># Array of CurvePt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed_limit</span> <span class="o">=</span> <span class="n">speed_limit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">boundary_left</span> <span class="o">=</span> <span class="n">boundary_left</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">boundary_right</span> <span class="o">=</span> <span class="n">boundary_right</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exits</span> <span class="o">=</span> <span class="n">exits</span>  <span class="c1"># Array of LaneConnection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entrances</span> <span class="o">=</span> <span class="n">entrances</span>  <span class="c1"># Array of LaneConnection</span>

        <span class="k">if</span> <span class="nb">next</span> <span class="o">!=</span> <span class="n">NULL_ROADINDEX</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exits</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">LaneConnection</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">curveindex_end</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">curve</span><span class="p">),</span> <span class="nb">next</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">prev</span> <span class="o">!=</span> <span class="n">NULL_ROADINDEX</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entrances</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">LaneConnection</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">CURVEINDEX_START</span><span class="p">,</span> <span class="n">prev</span><span class="p">))</span>

<div class="viewcode-block" id="Lane.get_by_ind_roadway"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.Lane.get_by_ind_roadway">[docs]</a>    <span class="k">def</span> <span class="nf">get_by_ind_roadway</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">:</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">CurveIndex</span><span class="p">,</span> <span class="n">roadway</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">        get CurvePt by Curve Index and roadway</span>
<span class="sd">        :param ind: Curve Index</span>
<span class="sd">        :param roadway: Roadway object</span>
<span class="sd">        :return: the corresponding CurvePt object</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c1"># print(ind.i, len(self.curve))</span>
        <span class="k">if</span> <span class="n">ind</span><span class="o">.</span><span class="n">i</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">pt_lo</span> <span class="o">=</span> <span class="n">prev_lane_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">roadway</span><span class="p">)</span>
            <span class="n">pt_hi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curve</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">s_gap</span> <span class="o">=</span> <span class="n">VecE2</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">VecE2</span><span class="o">.</span><span class="n">VecE2</span><span class="p">(</span><span class="n">pt_hi</span><span class="o">.</span><span class="n">pos</span> <span class="o">-</span> <span class="n">pt_lo</span><span class="o">.</span><span class="n">pos</span><span class="p">))</span>
            <span class="n">pt_lo</span> <span class="o">=</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">CurvePt</span><span class="p">(</span><span class="n">pt_lo</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="o">-</span><span class="n">s_gap</span><span class="p">,</span> <span class="n">pt_lo</span><span class="o">.</span><span class="n">k</span><span class="p">,</span> <span class="n">pt_lo</span><span class="o">.</span><span class="n">kd</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">lerp</span><span class="p">(</span><span class="n">pt_lo</span><span class="p">,</span> <span class="n">pt_hi</span><span class="p">,</span> <span class="n">ind</span><span class="o">.</span><span class="n">t</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">ind</span><span class="o">.</span><span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">curve</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">get_curve_list_by_index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">curve</span><span class="p">,</span> <span class="n">ind</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pt_hi</span> <span class="o">=</span> <span class="n">next_lane_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">roadway</span><span class="p">)</span>
            <span class="n">pt_lo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curve</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">s_gap</span> <span class="o">=</span> <span class="n">VecE2</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">VecE2</span><span class="o">.</span><span class="n">VecE2</span><span class="p">(</span><span class="n">pt_hi</span><span class="o">.</span><span class="n">pos</span> <span class="o">-</span> <span class="n">pt_lo</span><span class="o">.</span><span class="n">pos</span><span class="p">))</span>
            <span class="n">pt_hi</span> <span class="o">=</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">CurvePt</span><span class="p">(</span><span class="n">pt_hi</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="n">pt_lo</span><span class="o">.</span><span class="n">s</span> <span class="o">+</span> <span class="n">s_gap</span><span class="p">,</span> <span class="n">pt_hi</span><span class="o">.</span><span class="n">k</span><span class="p">,</span> <span class="n">pt_hi</span><span class="o">.</span><span class="n">kd</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">lerp</span><span class="p">(</span><span class="n">pt_lo</span><span class="p">,</span> <span class="n">pt_hi</span><span class="p">,</span> <span class="n">ind</span><span class="o">.</span><span class="n">t</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="has_next"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.has_next">[docs]</a><span class="k">def</span> <span class="nf">has_next</span><span class="p">(</span><span class="n">lane</span><span class="p">:</span> <span class="n">Lane</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    check if the given lane has next lane</span>
<span class="sd">    :param lane: the given lane</span>
<span class="sd">    :return: true if there is, false otherwise</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">exits</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="n">lane</span><span class="o">.</span><span class="n">exits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">mylane</span> <span class="o">==</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">curveindex_end</span><span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">curve</span><span class="p">)</span></div>


<div class="viewcode-block" id="has_prev"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.has_prev">[docs]</a><span class="k">def</span> <span class="nf">has_prev</span><span class="p">(</span><span class="n">lane</span><span class="p">:</span> <span class="n">Lane</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    check if the given lane has previous lane</span>
<span class="sd">    :param lane: the given lane</span>
<span class="sd">    :return: true if there is, false otherwise</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">entrances</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="n">lane</span><span class="o">.</span><span class="n">entrances</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">mylane</span> <span class="o">==</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">CURVEINDEX_START</span></div>


<div class="viewcode-block" id="connect"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.connect">[docs]</a><span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="n">source</span><span class="p">:</span> <span class="n">Lane</span><span class="p">,</span> <span class="n">dest</span><span class="p">:</span> <span class="n">Lane</span><span class="p">):</span>
    <span class="n">cindS</span> <span class="o">=</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">curveindex_end</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">curve</span><span class="p">)</span>
    <span class="n">cindD</span> <span class="o">=</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">CURVEINDEX_START</span>
    <span class="n">source</span><span class="o">.</span><span class="n">exits</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">LaneConnection</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span>  <span class="n">cindS</span><span class="p">,</span> <span class="n">RoadIndex</span><span class="p">(</span><span class="n">cindD</span><span class="p">,</span> <span class="n">dest</span><span class="o">.</span><span class="n">tag</span><span class="p">)))</span>
    <span class="n">dest</span><span class="o">.</span><span class="n">entrances</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">LaneConnection</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">cindD</span><span class="p">,</span> <span class="n">RoadIndex</span><span class="p">(</span><span class="n">cindS</span><span class="p">,</span> <span class="n">source</span><span class="o">.</span><span class="n">tag</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">source</span><span class="p">,</span> <span class="n">dest</span></div>


<div class="viewcode-block" id="RoadSegment"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.RoadSegment">[docs]</a><span class="k">class</span> <span class="nc">RoadSegment</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">lanes</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">        :param id: the identification number of the corresponding road segment</span>
<span class="sd">        :param lanes: list of lane in this segment</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>  <span class="c1"># integer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lanes</span> <span class="o">=</span> <span class="n">lanes</span>  <span class="c1"># Array of Lane</span></div>


<div class="viewcode-block" id="Roadway"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.Roadway">[docs]</a><span class="k">class</span> <span class="nc">Roadway</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segments</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">        This is the Roadway class</span>
<span class="sd">        :param segments: A list of RoadSegment</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">segments</span> <span class="o">=</span> <span class="n">segments</span>  <span class="c1"># Array of RoadSegment</span>

<div class="viewcode-block" id="Roadway.get_by_tag"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.Roadway.get_by_tag">[docs]</a>    <span class="k">def</span> <span class="nf">get_by_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="n">LaneTag</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">        get lane by a query lane tag</span>
<span class="sd">        :param tag: query LaneTag</span>
<span class="sd">        :return: the lane correspond to the query lane tag</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">seg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_by_id</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">segment</span><span class="p">)</span>
        <span class="c1"># print(seg.id, len(seg.lanes), tag.lane)</span>
        <span class="k">return</span> <span class="n">seg</span><span class="o">.</span><span class="n">lanes</span><span class="p">[</span><span class="n">tag</span><span class="o">.</span><span class="n">lane</span><span class="p">]</span></div>

<div class="viewcode-block" id="Roadway.get_by_id"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.Roadway.get_by_id">[docs]</a>    <span class="k">def</span> <span class="nf">get_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segid</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">        get seg by a query seg id</span>
<span class="sd">        :param segid: query seg id</span>
<span class="sd">        :return: the seg correspond to the query seg id</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">segments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">seg</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">segid</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">seg</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Could not find segid </span><span class="si">{}</span><span class="s2"> in roadway&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">segid</span><span class="p">))</span></div>

<div class="viewcode-block" id="Roadway.get_by_roadindex"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.Roadway.get_by_roadindex">[docs]</a>    <span class="k">def</span> <span class="nf">get_by_roadindex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">roadindex</span><span class="p">:</span> <span class="n">RoadIndex</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">        get lane by a query road index</span>
<span class="sd">        :param roadindex: query road index</span>
<span class="sd">        :return: the lane correspond to the query road index</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">lane</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_by_tag</span><span class="p">(</span><span class="n">roadindex</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lane</span><span class="o">.</span><span class="n">get_by_ind_roadway</span><span class="p">(</span><span class="n">roadindex</span><span class="o">.</span><span class="n">ind</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Roadway.has_segment"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.Roadway.has_segment">[docs]</a>    <span class="k">def</span> <span class="nf">has_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segid</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">        check if the roadway object has a seg given the seg id</span>
<span class="sd">        :param segid: seg id</span>
<span class="sd">        :return: true if there is, false otherwise</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">segments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">seg</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">segid</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Roadway.write"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.Roadway.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">        write the roadway information to the file given the filepath</span>
<span class="sd">        :param filepath: the file to write, string</span>
<span class="sd">        :return: no return</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c1"># writes to a text file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;ROADWAY</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">segments</span><span class="p">)))</span>
            <span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">segments</span><span class="p">:</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">seg</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
                <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">seg</span><span class="o">.</span><span class="n">lanes</span><span class="p">)))</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">lane</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">seg</span><span class="o">.</span><span class="n">lanes</span><span class="p">):</span>
                    <span class="k">assert</span> <span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">lane</span> <span class="o">==</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="si">%d</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
                    <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t\t</span><span class="si">%.3f</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">lane</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
                    <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t\t</span><span class="si">%.3f</span><span class="s2"> </span><span class="si">%.3f</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">speed_limit</span><span class="o">.</span><span class="n">lo</span><span class="p">,</span> <span class="n">lane</span><span class="o">.</span><span class="n">speed_limit</span><span class="o">.</span><span class="n">hi</span><span class="p">))</span>
                    <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t\t</span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">boundary_left</span><span class="o">.</span><span class="n">style</span><span class="p">,</span> <span class="n">lane</span><span class="o">.</span><span class="n">boundary_left</span><span class="o">.</span><span class="n">color</span><span class="p">))</span>
                    <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t\t</span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">boundary_right</span><span class="o">.</span><span class="n">style</span><span class="p">,</span> <span class="n">lane</span><span class="o">.</span><span class="n">boundary_right</span><span class="o">.</span><span class="n">color</span><span class="p">))</span>
                    <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t\t</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">exits</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">entrances</span><span class="p">)))</span>
                    <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="n">lane</span><span class="o">.</span><span class="n">exits</span><span class="p">:</span>
                        <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t\t\t</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="n">conn</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
                        <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="n">lane</span><span class="o">.</span><span class="n">entrances</span><span class="p">:</span>
                        <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t\t\t</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="n">conn</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
                        <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t\t</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">curve</span><span class="p">)))</span>
                    <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">lane</span><span class="o">.</span><span class="n">curve</span><span class="p">:</span>
                        <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t\t\t</span><span class="s2">(</span><span class="si">%.4f</span><span class="s2"> </span><span class="si">%.4f</span><span class="s2"> </span><span class="si">%.6f</span><span class="s2">) </span><span class="si">%.4f</span><span class="s2"> </span><span class="si">%.8f</span><span class="s2"> </span><span class="si">%.8f</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">pos</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span>
                                                                              <span class="n">pt</span><span class="o">.</span><span class="n">s</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">k</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">kd</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="read_roadway"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.read_roadway">[docs]</a><span class="k">def</span> <span class="nf">read_roadway</span><span class="p">(</span><span class="n">fp</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    parse roadway file and read it to a file given the file pointer</span>
<span class="sd">    :param fp: the file pointer</span>
<span class="sd">    :return: no return</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
    <span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">line_index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="s2">&quot;ROADWAY&quot;</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">[</span><span class="n">line_index</span><span class="p">]:</span>  <span class="c1">#文件第一行 ROADWAY title</span>
        <span class="n">line_index</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1">#继续读下一行</span>

    <span class="n">nsegs</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">line_index</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>  <span class="c1"># 读Roadway.segments的长度</span>
    <span class="n">line_index</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1">#继续读下一行</span>

    <span class="n">roadway</span> <span class="o">=</span> <span class="n">Roadway</span><span class="p">([])</span>
    <span class="k">for</span> <span class="n">i_seg</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nsegs</span><span class="p">):</span>  <span class="c1"># 循环读每个segments的内容</span>
        <span class="n">segid</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">line_index</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>  <span class="c1"># parse segments.id</span>
        <span class="n">line_index</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1">#继续读下一行</span>
        <span class="n">nlanes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">line_index</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>  <span class="c1"># 读出Roadway.segments.lanes的长度</span>
        <span class="n">line_index</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1">#继续读下一行</span>
        <span class="n">seg</span> <span class="o">=</span> <span class="n">RoadSegment</span><span class="p">(</span><span class="n">segid</span><span class="p">,</span> <span class="p">[])</span>  <span class="c1">#</span>
        <span class="k">for</span> <span class="n">i_lane</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nlanes</span><span class="p">):</span>  <span class="c1"># 循环读每个lane的内容</span>
            <span class="k">assert</span> <span class="n">i_lane</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">line_index</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>  <span class="c1"># 这里是用来确认lane符合顺序且读的方式正确</span>
            <span class="n">line_index</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1">#继续读下一行</span>
            <span class="n">tag</span> <span class="o">=</span> <span class="n">LaneTag</span><span class="p">(</span><span class="n">segid</span><span class="p">,</span> <span class="n">i_lane</span><span class="p">)</span>  <span class="c1"># make Roadway.segments.lanes.tag</span>
            <span class="c1">#print(segid, nlanes, i_lane)</span>
            <span class="n">width</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">line_index</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>  <span class="c1"># parse width</span>
            <span class="n">line_index</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1">#继续读下一行</span>
            <span class="n">tokens</span> <span class="o">=</span> <span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">line_index</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="n">line_index</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1">#继续读下一行</span>
            <span class="n">speed_limit</span> <span class="o">=</span> <span class="n">SpeedLimit</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>  <span class="c1"># parse speed limit</span>
            <span class="n">tokens</span> <span class="o">=</span> <span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">line_index</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="n">line_index</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1">#继续读下一行</span>
            <span class="n">boundary_left</span> <span class="o">=</span> <span class="n">LaneBoundary</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># parse boundary_left</span>
            <span class="n">tokens</span> <span class="o">=</span> <span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">line_index</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="n">line_index</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1">#继续读下一行</span>
            <span class="n">boundary_right</span> <span class="o">=</span> <span class="n">LaneBoundary</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># parse boundary_right</span>
            <span class="n">exits</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">entrances</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">n_conns</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">line_index</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>  <span class="c1"># 这里应该是Roadway.segments.lanes.exits以及entrances的长度</span>
            <span class="n">line_index</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1">#继续读下一行</span>
            <span class="k">for</span> <span class="n">i_conn</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_conns</span><span class="p">):</span>  <span class="c1"># 循环parse每个exit以及entrance</span>
                <span class="n">conn</span> <span class="o">=</span> <span class="n">parse_lane_connection</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">line_index</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>  <span class="c1"># parse LaneConnection</span>
                <span class="n">line_index</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1">#继续读下一行</span>
                <span class="k">if</span> <span class="n">conn</span><span class="o">.</span><span class="n">downstream</span><span class="p">:</span>
                    <span class="n">exits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>  <span class="c1"># if downstream 就是exit的数据</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">entrances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>  <span class="c1"># else entrance的数据</span>
            <span class="n">npts</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">line_index</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>  <span class="c1"># 有多少个curve点————Roadway.segments.lanes.curve的长度</span>
            <span class="n">line_index</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1">#继续读下一行</span>
            <span class="n">curve</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i_pt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">npts</span><span class="p">):</span>  <span class="c1"># 循环parse CurvePt</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">line_index</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">line_index</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1">#继续读下一行</span>
                <span class="n">cleanedline</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(\(|\))&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
                <span class="n">tokens</span> <span class="o">=</span> <span class="n">cleanedline</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
                <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="n">METERS_PER_FOOT</span>
                <span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">/</span><span class="n">METERS_PER_FOOT</span>
                <span class="n">theta</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                <span class="n">s</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
                <span class="n">k</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
                <span class="n">kd</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
                <span class="n">curve</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CurvePt</span><span class="o">.</span><span class="n">CurvePt</span><span class="p">(</span><span class="n">VecSE2</span><span class="o">.</span><span class="n">VecSE2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">theta</span><span class="p">),</span> <span class="n">s</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">kd</span><span class="p">))</span>  <span class="c1"># append CurvePt in Roadway.segments.lanes.curve</span>
            <span class="n">seg</span><span class="o">.</span><span class="n">lanes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Lane</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">curve</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">speed_limit</span><span class="o">=</span><span class="n">speed_limit</span><span class="p">,</span>
                                     <span class="n">boundary_left</span><span class="o">=</span><span class="n">boundary_left</span><span class="p">,</span>
                                     <span class="n">boundary_right</span><span class="o">=</span><span class="n">boundary_right</span><span class="p">,</span>
                                     <span class="n">entrances</span><span class="o">=</span><span class="n">entrances</span><span class="p">,</span> <span class="n">exits</span><span class="o">=</span><span class="n">exits</span><span class="p">))</span> <span class="c1"># append lane in Roadway.segments.lanes</span>
        <span class="n">roadway</span><span class="o">.</span><span class="n">segments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">seg</span><span class="p">)</span>  <span class="c1"># append segs in Roadway.segments</span>
        <span class="c1">#print(len(roadway.segments))</span>
    <span class="k">return</span> <span class="n">roadway</span></div>


<div class="viewcode-block" id="RoadProjection"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.RoadProjection">[docs]</a><span class="k">class</span> <span class="nc">RoadProjection</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">curveproj</span><span class="p">:</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">CurveProjection</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="n">LaneTag</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">        RoadProjection class</span>
<span class="sd">        :param curveproj: CurveProjection object</span>
<span class="sd">        :param tag: LaneTag</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curveproj</span> <span class="o">=</span> <span class="n">curveproj</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tag</span> <span class="o">=</span> <span class="n">tag</span></div>


<div class="viewcode-block" id="next_lane"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.next_lane">[docs]</a><span class="k">def</span> <span class="nf">next_lane</span><span class="p">(</span><span class="n">lane</span><span class="p">:</span> <span class="n">Lane</span><span class="p">,</span> <span class="n">roadway</span><span class="p">:</span> <span class="n">Roadway</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    get next lane</span>
<span class="sd">    :param lane: Lane object</span>
<span class="sd">    :param roadway: Roadway object</span>
<span class="sd">    :return: the lane after the given lane</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">roadway</span><span class="o">.</span><span class="n">get_by_tag</span><span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">exits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span></div>


<div class="viewcode-block" id="prev_lane"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.prev_lane">[docs]</a><span class="k">def</span> <span class="nf">prev_lane</span><span class="p">(</span><span class="n">lane</span><span class="p">:</span> <span class="n">Lane</span><span class="p">,</span> <span class="n">roadway</span><span class="p">:</span> <span class="n">Roadway</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    get previous lane</span>
<span class="sd">    :param lane: Lane object</span>
<span class="sd">    :param roadway: Roadway object</span>
<span class="sd">    :return: the lane before the given lane</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">roadway</span><span class="o">.</span><span class="n">get_by_tag</span><span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">entrances</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span></div>


<div class="viewcode-block" id="next_lane_point"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.next_lane_point">[docs]</a><span class="k">def</span> <span class="nf">next_lane_point</span><span class="p">(</span><span class="n">lane</span><span class="p">:</span> <span class="n">Lane</span><span class="p">,</span> <span class="n">roadway</span><span class="p">:</span> <span class="n">Roadway</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    get next lane point</span>
<span class="sd">    :param lane: Lane object</span>
<span class="sd">    :param roadway: Roadway object</span>
<span class="sd">    :return: the lane point after the given lane</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">roadway</span><span class="o">.</span><span class="n">get_by_roadindex</span><span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">exits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">target</span><span class="p">)</span></div>


<div class="viewcode-block" id="prev_lane_point"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.prev_lane_point">[docs]</a><span class="k">def</span> <span class="nf">prev_lane_point</span><span class="p">(</span><span class="n">lane</span><span class="p">:</span> <span class="n">Lane</span><span class="p">,</span> <span class="n">roadway</span><span class="p">:</span> <span class="n">Roadway</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    get previous lane point</span>
<span class="sd">    :param lane: Lane object</span>
<span class="sd">    :param roadway: Roadway object</span>
<span class="sd">    :return: the lane point before the given lane</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">roadway</span><span class="o">.</span><span class="n">get_by_roadindex</span><span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">entrances</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">target</span><span class="p">)</span></div>


<div class="viewcode-block" id="sign"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.sign">[docs]</a><span class="k">def</span> <span class="nf">sign</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    check the sign of a given real number</span>
<span class="sd">    :param a: the given real number</span>
<span class="sd">    :return: 1 if &gt;0, -1 if &lt;0, 0 if ==0</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span></div>


<div class="viewcode-block" id="get_closest_perpendicular_point_between_points"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.get_closest_perpendicular_point_between_points">[docs]</a><span class="k">def</span> <span class="nf">get_closest_perpendicular_point_between_points</span><span class="p">(</span><span class="n">A</span><span class="p">:</span> <span class="n">VecSE2</span><span class="o">.</span><span class="n">VecSE2</span><span class="p">,</span> <span class="n">B</span><span class="p">:</span> <span class="n">VecSE2</span><span class="o">.</span><span class="n">VecSE2</span><span class="p">,</span> <span class="n">Q</span><span class="p">:</span> <span class="n">VecSE2</span><span class="o">.</span><span class="n">VecSE2</span><span class="p">,</span>
    <span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span> <span class="c1"># acceptable error in perpendicular component</span>
    <span class="n">max_iter</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span> <span class="c1"># maximum number of iterations</span>
    <span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    get closest perpendicular point between given points</span>
<span class="sd">    CONDITIONS: a &lt; b, either f(a) &lt; 0 and f(b) &gt; 0 or f(a) &gt; 0 and f(b) &lt; 0</span>
<span class="sd">    :param A: start point</span>
<span class="sd">    :param B: end point</span>
<span class="sd">    :param Q: query point</span>
<span class="sd">    :param tolerance: acceptable error in perpendicular component</span>
<span class="sd">    :param max_iter: maximum number of iterations</span>
<span class="sd">    :return: value which differs from a root of f(x)=0 by less than TOL</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1"># CONDITIONS: a &lt; b, either f(a) &lt; 0 and f(b) &gt; 0 or f(a) &gt; 0 and f(b) &lt; 0</span>
    <span class="c1"># OUTPUT: value which differs from a root of f(x)=0 by less than TOL</span>

    <span class="n">a</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mf">1.0</span>

    <span class="n">f_a</span> <span class="o">=</span> <span class="n">geom</span><span class="o">.</span><span class="n">inertial2body</span><span class="p">(</span><span class="n">Q</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">x</span>
    <span class="n">f_b</span> <span class="o">=</span> <span class="n">geom</span><span class="o">.</span><span class="n">inertial2body</span><span class="p">(</span><span class="n">Q</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span><span class="o">.</span><span class="n">x</span>

    <span class="k">if</span> <span class="n">sign</span><span class="p">(</span><span class="n">f_a</span><span class="p">)</span> <span class="o">==</span> <span class="n">sign</span><span class="p">(</span><span class="n">f_b</span><span class="p">):</span> <span class="c1"># both are wrong - use the old way</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">get_lerp_time_unclamped_3</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">Q</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">clamp</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">t</span><span class="p">,</span> <span class="n">VecSE2</span><span class="o">.</span><span class="n">lerp</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>

    <span class="nb">iter</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="nb">iter</span> <span class="o">&lt;=</span> <span class="n">max_iter</span><span class="p">:</span>
        <span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="c1"># new midpoint</span>
        <span class="n">footpoint</span> <span class="o">=</span> <span class="n">VecSE2</span><span class="o">.</span><span class="n">lerp</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
        <span class="n">f_c</span> <span class="o">=</span> <span class="n">geom</span><span class="o">.</span><span class="n">inertial2body</span><span class="p">(</span><span class="n">Q</span><span class="p">,</span> <span class="n">footpoint</span><span class="p">)</span><span class="o">.</span><span class="n">x</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">f_c</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">tolerance</span><span class="p">:</span> <span class="c1"># solution found</span>
            <span class="k">return</span> <span class="n">c</span><span class="p">,</span> <span class="n">footpoint</span>
        <span class="k">if</span> <span class="n">sign</span><span class="p">(</span><span class="n">f_c</span><span class="p">)</span> <span class="o">==</span> <span class="n">sign</span><span class="p">(</span><span class="n">f_a</span><span class="p">):</span>
            <span class="n">a</span><span class="p">,</span> <span class="n">f_a</span> <span class="o">=</span> <span class="n">c</span><span class="p">,</span> <span class="n">f_c</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">c</span>
        <span class="nb">iter</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># Maximum number of iterations passed</span>
    <span class="c1"># This will occur when we project with a point that is not actually in the range,</span>
    <span class="c1"># and we converge towards one edge</span>

    <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">A</span>
    <span class="k">elif</span> <span class="n">b</span> <span class="o">==</span> <span class="mf">1.0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">B</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;get_closest_perpendicular_point_between_points - should not happen&quot;</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>  <span class="c1"># should not happen</span>
        <span class="k">return</span> <span class="n">c</span><span class="p">,</span> <span class="n">VecSE2</span><span class="o">.</span><span class="n">lerp</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span></div>


<div class="viewcode-block" id="proj_1"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.proj_1">[docs]</a><span class="k">def</span> <span class="nf">proj_1</span><span class="p">(</span><span class="n">posG</span><span class="p">:</span> <span class="n">VecSE2</span><span class="o">.</span><span class="n">VecSE2</span><span class="p">,</span> <span class="n">lane</span><span class="p">:</span> <span class="n">Lane</span><span class="p">,</span> <span class="n">roadway</span><span class="p">:</span> <span class="n">Roadway</span><span class="p">,</span> <span class="n">move_along_curves</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    proj(posG::VecSE2, lane::Lane, roadway::Roadway; move_along_curves::Bool=true)</span>
<span class="sd">    Return the RoadProjection for projecting posG onto the lane.</span>
<span class="sd">    This will automatically project to the next or prev curve as appropriate.</span>
<span class="sd">    if `move_along_curves` is false, will only project to lane.curve</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">curveproj</span> <span class="o">=</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">proj</span><span class="p">(</span><span class="n">posG</span><span class="p">,</span> <span class="n">lane</span><span class="o">.</span><span class="n">curve</span><span class="p">)</span>
    <span class="n">rettag</span> <span class="o">=</span> <span class="n">lane</span><span class="o">.</span><span class="n">tag</span>
    <span class="c1"># print(curveproj.ind.i)</span>
    <span class="k">if</span> <span class="n">has_next</span><span class="p">(</span><span class="n">lane</span><span class="p">)</span> <span class="ow">or</span> <span class="n">has_prev</span><span class="p">(</span><span class="n">lane</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">has_prev</span><span class="p">(</span><span class="n">lane</span><span class="p">),</span> <span class="n">has_next</span><span class="p">(</span><span class="n">lane</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">curveproj</span><span class="o">.</span><span class="n">ind</span> <span class="o">==</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">CurveIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span> <span class="ow">and</span> <span class="n">has_prev</span><span class="p">(</span><span class="n">lane</span><span class="p">):</span>
        <span class="n">pt_lo</span> <span class="o">=</span> <span class="n">prev_lane_point</span><span class="p">(</span><span class="n">lane</span><span class="p">,</span> <span class="n">roadway</span><span class="p">)</span>
        <span class="n">pt_hi</span> <span class="o">=</span> <span class="n">lane</span><span class="o">.</span><span class="n">curve</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">get_lerp_time_unclamped_2</span><span class="p">(</span><span class="n">pt_lo</span><span class="p">,</span> <span class="n">pt_hi</span><span class="p">,</span> <span class="n">posG</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mf">0.0</span> <span class="ow">and</span> <span class="n">move_along_curves</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">proj_1</span><span class="p">(</span><span class="n">posG</span><span class="p">,</span> <span class="n">prev_lane</span><span class="p">(</span><span class="n">lane</span><span class="p">,</span> <span class="n">roadway</span><span class="p">),</span> <span class="n">roadway</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="k">assert</span> <span class="p">((</span><span class="ow">not</span> <span class="n">move_along_curves</span><span class="p">)</span> <span class="ow">or</span> <span class="mf">0.0</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="c1"># t was computed assuming a constant angle</span>
            <span class="c1"># this is not valid for the large distances and angle disparities between lanes</span>
            <span class="c1"># thus we now use a bisection search to find the appropriate location</span>

            <span class="n">t</span><span class="p">,</span> <span class="n">footpoint</span> <span class="o">=</span> <span class="n">get_closest_perpendicular_point_between_points</span><span class="p">(</span><span class="n">pt_lo</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="n">pt_hi</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="n">posG</span><span class="p">)</span>

            <span class="n">ind</span> <span class="o">=</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">CurveIndex</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
            <span class="n">curveproj</span> <span class="o">=</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">get_curve_projection</span><span class="p">(</span><span class="n">posG</span><span class="p">,</span> <span class="n">footpoint</span><span class="p">,</span> <span class="n">ind</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">curveproj</span><span class="o">.</span><span class="n">ind</span> <span class="o">==</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">curveindex_end</span><span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">curve</span><span class="p">)</span> <span class="ow">and</span> <span class="n">has_next</span><span class="p">(</span><span class="n">lane</span><span class="p">):</span>
        <span class="n">pt_lo</span> <span class="o">=</span> <span class="n">lane</span><span class="o">.</span><span class="n">curve</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">pt_hi</span> <span class="o">=</span> <span class="n">next_lane_point</span><span class="p">(</span><span class="n">lane</span><span class="p">,</span> <span class="n">roadway</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">get_lerp_time_unclamped_2</span><span class="p">(</span><span class="n">pt_lo</span><span class="p">,</span> <span class="n">pt_hi</span><span class="p">,</span> <span class="n">posG</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;=</span> <span class="mf">1.0</span> <span class="ow">and</span> <span class="n">move_along_curves</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">proj_1</span><span class="p">(</span><span class="n">posG</span><span class="p">,</span> <span class="n">next_lane</span><span class="p">(</span><span class="n">lane</span><span class="p">,</span> <span class="n">roadway</span><span class="p">),</span> <span class="n">roadway</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">t</span> <span class="o">&gt;=</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">assert</span> <span class="p">((</span><span class="ow">not</span> <span class="n">move_along_curves</span><span class="p">)</span> <span class="ow">or</span> <span class="mf">0.0</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="c1"># t was computed assuming a constant angle</span>
            <span class="c1"># this is not valid for the large distances and angle disparities between lanes</span>
            <span class="c1"># thus we now use a bisection search to find the appropriate location</span>

            <span class="n">t</span><span class="p">,</span> <span class="n">footpoint</span> <span class="o">=</span> <span class="n">get_closest_perpendicular_point_between_points</span><span class="p">(</span><span class="n">pt_lo</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="n">pt_hi</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="n">posG</span><span class="p">)</span>

            <span class="n">ind</span> <span class="o">=</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">CurveIndex</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">curve</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
            <span class="n">curveproj</span> <span class="o">=</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">get_curve_projection</span><span class="p">(</span><span class="n">posG</span><span class="p">,</span> <span class="n">footpoint</span><span class="p">,</span> <span class="n">ind</span><span class="p">)</span>
    <span class="c1">#print(rettag.segment, rettag.lane)</span>
    <span class="k">return</span> <span class="n">RoadProjection</span><span class="p">(</span><span class="n">curveproj</span><span class="p">,</span> <span class="n">rettag</span><span class="p">)</span></div>


<div class="viewcode-block" id="proj_2"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.proj_2">[docs]</a><span class="k">def</span> <span class="nf">proj_2</span><span class="p">(</span><span class="n">posG</span><span class="p">:</span> <span class="n">VecSE2</span><span class="o">.</span><span class="n">VecSE2</span><span class="p">,</span> <span class="n">roadway</span><span class="p">:</span> <span class="n">Roadway</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    proj(posG::VecSE2, seg::RoadSegment, roadway::Roadway)</span>
<span class="sd">    Return the RoadProjection for projecting posG onto the roadway.</span>
<span class="sd">    Tries all of the lanes and gets the closest one</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">best_dist2</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">inf</span>
    <span class="n">best_proj</span> <span class="o">=</span> <span class="n">RoadProjection</span><span class="p">(</span><span class="n">CurvePt</span><span class="o">.</span><span class="n">CurveProjection</span><span class="p">(</span><span class="n">CurvePt</span><span class="o">.</span><span class="n">CurveIndex</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">NULL_LANETAG</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="n">roadway</span><span class="o">.</span><span class="n">segments</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">lane</span> <span class="ow">in</span> <span class="n">seg</span><span class="o">.</span><span class="n">lanes</span><span class="p">:</span>
            <span class="n">roadproj</span> <span class="o">=</span> <span class="n">proj_1</span><span class="p">(</span><span class="n">posG</span><span class="p">,</span> <span class="n">lane</span><span class="p">,</span> <span class="n">roadway</span><span class="p">,</span> <span class="n">move_along_curves</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># return RoadProjection</span>
            <span class="n">targetlane</span> <span class="o">=</span> <span class="n">roadway</span><span class="o">.</span><span class="n">get_by_tag</span><span class="p">(</span><span class="n">roadproj</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span>  <span class="c1"># return Lane</span>
            <span class="n">footpoint</span> <span class="o">=</span> <span class="n">targetlane</span><span class="o">.</span><span class="n">get_by_ind_roadway</span><span class="p">(</span><span class="n">roadproj</span><span class="o">.</span><span class="n">curveproj</span><span class="o">.</span><span class="n">ind</span><span class="p">,</span> <span class="n">roadway</span><span class="p">)</span>
            <span class="n">vec</span> <span class="o">=</span> <span class="n">posG</span> <span class="o">-</span> <span class="n">footpoint</span><span class="o">.</span><span class="n">pos</span>
            <span class="n">dist2</span> <span class="o">=</span> <span class="n">VecE2</span><span class="o">.</span><span class="n">normsquared</span><span class="p">(</span><span class="n">VecE2</span><span class="o">.</span><span class="n">VecE2</span><span class="p">(</span><span class="n">vec</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">vec</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
            <span class="c1"># print(best_dist2, dist2, roadproj.curveproj.ind.i)</span>
            <span class="k">if</span> <span class="n">dist2</span> <span class="o">&lt;</span> <span class="n">best_dist2</span><span class="p">:</span>
                <span class="n">best_dist2</span> <span class="o">=</span> <span class="n">dist2</span>
                <span class="n">best_proj</span> <span class="o">=</span> <span class="n">roadproj</span>
    <span class="k">return</span> <span class="n">best_proj</span></div>


<div class="viewcode-block" id="n_lanes_right"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.n_lanes_right">[docs]</a><span class="k">def</span> <span class="nf">n_lanes_right</span><span class="p">(</span><span class="n">lane</span><span class="p">:</span> <span class="n">Lane</span><span class="p">,</span> <span class="n">roadway</span><span class="p">:</span> <span class="n">Roadway</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    :param lane: Lane object</span>
<span class="sd">    :param roadway: Roadway object</span>
<span class="sd">    :return: how many lane on the left of the given lane</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">lane</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">lane</span></div>


<div class="viewcode-block" id="n_lanes_left"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.n_lanes_left">[docs]</a><span class="k">def</span> <span class="nf">n_lanes_left</span><span class="p">(</span><span class="n">lane</span><span class="p">:</span> <span class="n">Lane</span><span class="p">,</span> <span class="n">roadway</span><span class="p">:</span> <span class="n">Roadway</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    :param lane: Lane object</span>
<span class="sd">    :param roadway: Roadway object</span>
<span class="sd">    :return: how many lane on the right of the given lane</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">seg</span> <span class="o">=</span> <span class="n">roadway</span><span class="o">.</span><span class="n">get_by_id</span><span class="p">(</span><span class="n">lane</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">segment</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">seg</span><span class="o">.</span><span class="n">lanes</span><span class="p">)</span> <span class="o">-</span> <span class="n">lane</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">lane</span> <span class="o">-</span> <span class="mi">1</span></div>


<div class="viewcode-block" id="is_between_segments_lo"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.is_between_segments_lo">[docs]</a><span class="k">def</span> <span class="nf">is_between_segments_lo</span><span class="p">(</span><span class="n">ind</span><span class="p">:</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">CurveIndex</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    check if the given CurveIndex is the first</span>
<span class="sd">    :param ind: CurveIndex</span>
<span class="sd">    :return: true if is the first, false otherwise</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">ind</span><span class="o">.</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span></div>


<div class="viewcode-block" id="is_between_segments_hi"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.is_between_segments_hi">[docs]</a><span class="k">def</span> <span class="nf">is_between_segments_hi</span><span class="p">(</span><span class="n">ind</span><span class="p">:</span> <span class="n">CurvePt</span><span class="o">.</span><span class="n">CurveIndex</span><span class="p">,</span> <span class="n">curve</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    check if the given CurveIndex is the last</span>
<span class="sd">    :param ind: CurveIndex</span>
<span class="sd">    :return: true if is the last, false otherwise</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">ind</span><span class="o">.</span><span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">curve</span><span class="p">)</span></div>


<div class="viewcode-block" id="is_in_exits"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.is_in_exits">[docs]</a><span class="k">def</span> <span class="nf">is_in_exits</span><span class="p">(</span><span class="n">lane</span><span class="p">:</span> <span class="n">Lane</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="n">LaneTag</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    </span>
<span class="sd">    check if the given LaneTag object is in exits list</span>
<span class="sd">    :param lane: Lane object</span>
<span class="sd">    :param target: LaneTag object</span>
<span class="sd">    :return: true if in exits list, false otherwise</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">for</span> <span class="n">lc</span> <span class="ow">in</span> <span class="n">lane</span><span class="o">.</span><span class="n">exits</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">lc</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="n">target</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="is_in_entrances"><a class="viewcode-back" href="../../../src.Roadway.html#src.Roadway.roadway.is_in_entrances">[docs]</a><span class="k">def</span> <span class="nf">is_in_entrances</span><span class="p">(</span><span class="n">lane</span><span class="p">:</span> <span class="n">Lane</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="n">LaneTag</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    check if the given LaneTag object is in entrances list</span>
<span class="sd">    :param lane: Lane object</span>
<span class="sd">    :param target: LaneTag object</span>
<span class="sd">    :return: true if in entrances list, false otherwise</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">for</span> <span class="n">lc</span> <span class="ow">in</span> <span class="n">lane</span><span class="o">.</span><span class="n">entrances</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">lc</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="n">target</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span></div>






</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">AutoEnv</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../src.html">src package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../algorithms.html">algorithms package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../envs.html">envs package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../feature_extractor.html">feature_extractor package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../preprocessing.html">preprocessing package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, JackFram.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>